\documentclass[a4paper,11pt]{report}
  \usepackage{cmap}
  \usepackage[english,russian]{babel}
  \usepackage[utf8]{inputenc}
  \usepackage{indentfirst}
  \usepackage{changepage}
  \frenchspacing

  \addto\captionsrussian{
    \renewcommand\chaptername{Раздел}
    \renewcommand\contentsname{Содержание}
  }

  \renewcommand{\theenumii}{(\asbuk{enumii})}
  \renewcommand{\labelenumii}{\asbuk{enumii})}

  \author{И.\,А.\,Новиков, кафедра АФТИ ФФ НГУ, гр.\,7305\\ Руководитель: Д.\,А.\,Гладкий, Софтлаб-Нск}
  \title{<<Система моделирования деформаций неупругих тел в реальном времени>>\\\itshape Октябрьский отчёт}
\begin{document}
  \maketitle
  \tableofcontents
  \chapter*{Введение}
  \addcontentsline{toc}{chapter}{Введение}

    Приложения виртуальной реальности становятся чрезвычайно распространёнными в~наши~дни.  Два
    основных их типа~--- это компьютерные игры и~обучающие симуляторы (тренажёры). Несмотря на
    различные применения, эти два типа приложений имеют много общего, поскольку в~обоих случаях
    требуется создать иллюзию присутствия у~пользователя. Для~этого необходимо как генерировать
    фотореалистичные изображения, так и правдоподобно моделировать физику взаимодействия объектов
    виртуального мира: их движение, столкновения, деформации и~разрушение.

    Моделирование деформаций объектов является актуальной задачей, поскольку помимо приложений
    виртуальной реальности оно находит применение в~системах автоматизированного проектирования, а~также используется
    при~создании спецэффектов к~фильмам.  Как правило, в зависимости от конкретного применения
    используются различные алгоритмы, поскольку ставятся разные задачи и в каждом случае имеют место
    специфические ограничения. А~именно, в~системах автоматизированного проектирования требуется
    максимальная точность расчётов, в~то~время как в~фильмах и приложениях виртуальной реальности
    требуется лишь визуальная правдоподобность. При~этом, если расчёты для САПР и~спецэффектов могут
    выполняться длительное время, то в~интерактивных приложениях расчёт одного шага алгоритма должен
    происходить не~дольше, чем за~промежуток между кадрами, чтобы обеспечивать плавную анимацию
    и~быструю реакцию на~действия пользователя.

    Жёсткие требования быстродействия в приложениях реального времени не~только вынуждают
    использовать упрощённые физические модели деформации тела, менее точные, чем используемые
    в~инженерных расчётах, но и накладывают существенные ограничения на~количество точек, задающих
    моделируемый объект, так~как время расчётов напрямую зависит от него. Для отображения же
    объектов часто используют высоко детализированные сетки, содержащие вплоть до нескольких
    сотен тысяч и даже миллионов точек. Это значительно превышает эти ограничения для большинства
    алгоритмов \cite{muller-stable, muller-meshless, chang-crash}, если они применяются на
    современных настольных компьютерах и компьютерах, используемых в тренажёрах. В этом случае
    невозможно использовать одно и~то~же представление объекта и для моделирования, и для
    отображения.

  \chapter{Описание предметной области}\label{domain}

    Существуют различные подходы к~моделированию деформаций в~реальном времени. В простейшем случае
    ограничения на~быстродействие алгоритма обходятся за счёт использования предварительно расчитанных
    деформированных состояний для~некоторого конечного набора возможных ударов по~объекту, одно из которых
    (или~интерполяция между несколькими ближайшими) выбирается в~зависимости от~того, к~какому
    из~этих ударов ближе всего произошедший. В~этом случае допускается использование достаточно сложных
    для~вычисления алгоритмов, таких~как система масс и~пружин (англ. {\English mass-spring system})
    с~большим разрешением или~метод конечных элементов (англ. {\English finite elements method, FEM}).
    Однако, при ударе, отличающемся от~заранее расчитанного, или в~случае сложной комбинации ударов
    моделируемые деформации будут выглядеть нереалистично. Кроме того, значительное время, требуемое
    для предварительных расчётов после каждого изменения объекта, прежде чем он может быть загружен
    в приложение для тестирования, создаёт неудобства при разработке приложения. Поэтому наибольший
    интерес представляют решения, в которых моделирование деформаций происходит во время исполнения.

    Одной из~простейших моделей деформируемого тела является упоминавшаяся выше ситема масс
    и~пружин, в~которой тело представляется в~виде пространственной (как~правило, регулярной и
    кубической) решётки из~материальных точек, связанных между~собой пружинами, при~изменении длины
    прикладывающими к~своим концам силу согласно закону Гука. Будучи очень простой в~реализации,
    такая модель, тем не менее, плохо подходит для задач реального времени из-за проблем с~устойчивостью,
    возникающих при достаточно сильных воздействиях на объект. Кроме~того, требуется дополнительно
    конвертивать представление объекта, используемое для его отображения (чаще всего~--- сетку из
    треугольников), в~регулярную решётку и~подбирать упругость пружин так, чтобы добиться требуемых
    свойств моделируемого материала.

    Принципиально другой подход реализуется в моделях, использующих метод конечных элементов, широко
    используемый в структурном анализе (англ. {\English structural analysis}). При таком подходе
    непрерывные характеристики деформируемого тела вычисляются путём интерполяции их~значений
    на~элементах конечного размера. Разумеется, использовать в чистом виде методы структурного
    анализа в приложения реального времени невозможно, поскольку инженерные расчёты производятся в
    течение нескольких часов и даже суток. Однако, существуют модели, предлагающие различные упрощения этих
    методов, которые допускают вычисление в реальном времени, как, например в \cite{muller-stable}.
    Деформации при этом моделируются намного точнее, чем в случае системы масс и пружин, но даже
    упрощённый алгоритм требует намного больше времени для вычислений.

    Отдельно стоят так~называемые геометрические алгоритмы, в~которых напрямую не~моделируются
    физические законы. Как~правило, объект представляется в~виде системы частиц, движение каждой из
    которых сначала интегрируется независимо от~остальных, а~следующим шагом на объект в~целом
    накладываются различные физически мотивированные ограничения (сохранение формы, объёма, импульса
    и~т.п.), обеспечивающие в итоге правдоподобные деформации. Такие методы обладают хорошим
    быстродействием и могут вычисляться параллельно, при этом обладая большей устойчивостью и
    простотой в конфигурации, чем системы масс и пружин.

  \chapter{Постановка задачи}

    Целью работы является разработка системы моделирования деформаций объектов для применения в
    приложениях виртуальной реальности: в компьютерных играх и обучающих тренажёрах.
    К~системе предъявляются следующие требования.

    Поскольку в этих приложениях для отображения объекты чаще всего представляются в виде сеток
    из треугольников, то система должна либо использовать их в качестве внутреннего представления, либо
    предусматривать конвертацию.

    Система должна иметь достаточное быстродействие, чтобы обеспечивать моделирование в~реальном
    времени. Чтобы это было возможно даже для~объектов, заданных сеткой с~большим числом вершин,
    должна иметься возможность использовать при~моделировании менее детализированное представление
    объекта, а~отображаемую сетку более высокого разрешения обновлять так, чтобы она повторяла
    рассчитанные деформации. При~этом важно предусмотреть некоторое сглаживание смещений точек
    отображаемого объекта, иначе в~их~движении можно будет проследить форму низко детализированного
    представления.

    Кроме~того, предварительно рассчитанные деформированные состояния не~должны использоваться,
    поскольку, как было объяснено в разделе~\ref{domain}, такой подход негативно сказывается на реалистичности
    моделирования и создаёт неудобства при разработке приложения.

    Наконец, интерфейс, предоставляемый системой, не~должен создавать трудностей при~интеграции
    системы в~приложения виртуальной реальности. Основные критерии, которым необходимо следовать
    описаны в~\cite{gems-middleware} и~включают, в~частности, конфигурируемые обработку ошибок,
    логирование и~выделение памяти, а также отказ от~прямого доступа к~файловой системе в~пользу
    работы с~буферами в~оперативной памяти.

    Для достижения цели необходимо решить следующие задачи.
    \begin{enumerate}
      \item Разработать и~реализовать алгоритм моделирования деформаций неупругих тел, заданных
        полигональной сеткой;
      \item Предоставить интерфейс для~двустороннего взаимодействия с~приложением, в~которое будет
        встроена система, включающего:
        \begin{enumerate}
          \item получение извне информации о~столкновениях объекта и~приложенных к~нему силах;
          \item сообщение наружу о сильных локальных деформациях;
          \item обновление отображаемой сетки.
        \end{enumerate}
      \item Предусмотреть в~алгоритме возможность использования параллельных вычислений.
    \end{enumerate}

  \chapter{План-график}

    \begin{adjustwidth}{-1cm}{-1cm}
      \begin{center}
        \begin{tabular}{|p{8cm}|c|c|}\hline
          Задача                                       & Время         & Срок  \\\hline\hline
          Проработка архитектуры системы, разработка и реализация алгоритма деформаций
          с юнит-тестами для тестирования базовых функций и простым тестовым приложением
          для комплексного тестирования                & (выполнено)   & 31.10 \\\hline
          Реализация интерфейса {\English callback}'ов & 1 мес.        & 30.11 \\\hline
          Реализация отображения низкополигональной
          модели на высокополигональную сетку          & 0,5 мес.      & 15.12 \\\hline
          Разработка интерактивного тестового
          приложения, тестирование правдоподобности
          деформаций                                   & 0,5 мес.      & 31.12 \\\hline
          Профилирование и оптимизация алгоритма       & 1 мес.        & 31.01 \\\hline
          Адаптация алгоритма для параллельных
          вычислений                                   & 1--1,5 мес.   & 28.02--15.03 \\\hline
        \end{tabular}
      \end{center}
    \end{adjustwidth}

  \chapter{Обзор литературы}

    \cite[Physically Based Deformable Models...]{muller-physmodels}. Статья представляет собой
      обзор распространённых физических методов моделирования деформаций. Приводится их классификация
      и~вкратце описывается основная идея каждого метода, а~также его особенности,
      преимущества и недостатки.

    \cite[Meshless Deformations...]{muller-meshless}. В~статье описывается алгоритм
      моделирования деформаций тела, заданного набором вершин, не~требующий информации о~связях
      между ними. Алгоритм геометрический, то~есть прямо не~моделирует физические законы, но путём
      наложения дополнительных ограничений можно добиться правдоподобно выглядящих результатов.
      Преимуществом алгоритма является то, что отдельные вершины обрабатываются независимо,
      благодаря чему расчёты для~них можно производить параллельно.

    \cite[Stable Real-Time Deformations]{muller-stable}. В статье описывается иной алгоритм
      моделирования деформаций, основанный на~методе конечных элементов. Основной идеей является то,
      что непрерывные характеристики деформируемого тела вычисляются путём интерполяции их~значений
      на~элементах конечного размера. Этот алгоритм обеспечивает более реалистичные деформации, чем
      описанный в~\cite{muller-meshless}, но требует значительно больше времени для~расчётов. Кроме
      того, объект нужно задавать объёмной тетраэдрическай сеткой, в~то~время как в~приложениях
      виртуальной реальности и~играх чаще используются поверхностные сетки.

    \cite[Position Based Dynamics]{muller-position-dynamics}. Авторы этой статьи предлагают
      альтернативный подход к~моделированию деформаций мягких тел (в~частности, ткани): вместо
      вычисления действия на~тело набора сил, в~алгоритме используются только позиции и~скорости
      точек, составляющих тело, на~которые накладываются ограничения (англ. {\English constraints}),
      обеспечивающие требуемые свойства материала, а~также реакцию на~столкновения. В~статье
      предлагаются некоторые идеи, которые могут быть полезны и при~традиционном подходе, например,
      способ расчёта демпфирования.

    \cite[Deforming a High-Resolution Mesh...]{visser-mapping}. Статья посвящена проблеме
      использования сеток разной степени детализации для~моделирования физики и для~отображения
      на~экране, возникающей из-за~того, что максимальное число вершин в~сетке, при~котором возможен
      расчёт физики в~реальном времени, меньше, чем~требуемое для~отображения деталей объекта.
      Необходимо, чтобы сетка высокого разрешения повторяла деформации сетки низкого разрешения, но
      чтобы при~этом форма направляющей сетки не~прослеживалась по~движению отображаемой.

    \cite[Efficient Mesh Deformation Using Tetrahedron Control Mesh]{huang-control-mesh}.
      В~статье предлагается решение задачи деформации сложного объекта, заданной деформацией простой
      контрольной сетки. Идеи представленного алгоритма интерполяции могут быть применены для
      обеспечения соответствия между низко детализированной физической моделью и высоко детализированной
      сеткой для отображения, как в~\cite{visser-mapping}, но так~как в~этой статье ставится другая
      задача, предложенный алгоритм более трудоемкий, и~допускает лишь несколько сотен вершин
      в~контрольной сетке.

    \cite[Numerical Recipes...]{fortran-jacobi}. В~главе {\English ``Jacobi Transformations
      of~a~Symmetric Matrix''} этой книги описываются <<преобразования Якоби>>, каждое из~которых
      представляет собой отдельный шаг приближенного итеративного алгоритма диагонализации
      симметричной матрицы. Этот алгоритм может быть применен для~диагонализации матриц, возникающих
      в~алгоритме моделирования деформаций, описанном в~\cite{muller-meshless}.

    \cite[Frobenius Iteration for the Matrix Polar Decomposition]{hp-polar}. В~статье
      предлагается итеративный алгоритм для приближенного вычисления полярного разложения
      произвольной матрицы. Задача нахождения полярного разложения возникает в~\cite{muller-meshless},
      так что описанный алгоритм может быть применён вместо предложенного в~\cite{muller-meshless},
      будучи более эффективным и~надёжным.

    \cite[What to Look for When Evaluating Middleware for Integration]{gems-middleware}.
      В~этой статье из альманаха {\English Game Engine Gems} автор предлагает критерии, которыми
      следует руководствоваться при~выборе промежуточного ПО (англ. {\English middleware}) для интеграции
      в~коммерческое приложение (в~частности --- игровой движок). Следование этим критериям
      значительно упрощает интеграцию, поэтому нужно стремиться к тому, чтобы разрабатываемая
      система удовлетворяла им.

  \begin{thebibliography}{99}
  \addcontentsline{toc}{chapter}{Литература}

    \bibitem{muller-physmodels}
      A. Nealen, M. Müller, R. Keiser, E. Boxerman, M. Carlson.
      \newblock Physically Based Deformable Models in Computer Graphics.
      \newblock --- Computer Graphics Forum, Vol. 25, issue 4, Wiley-Blackwell, 2006.
      \newblock --- с.~809--836.

    \bibitem{muller-meshless}
      M. Müller, B. Heidelberger, M. Teschner, M. Gross.
      \newblock Meshless Deformations Based on Shape Matching.
      \newblock --- Proceedings of SIGGRAPH'05, Los Angeles, USA, 2005.
      \newblock --- с.~471--478.

    \bibitem{muller-stable}
      M. Müller, J. Dorsey, L. McMillan, R. Jagnow, B. Cutler.
      \newblock Stable Real-Time Deformations.
      \newblock --- Proceedings of ACM SIGGRAPH Symposium on Computer Animation (SCA), San Antonio,
                    USA, 2002.
      \newblock --- с.~49--54

    \bibitem{muller-position-dynamics}
      M. Müller, B. Heidelberger, M. Hennix, J. Ratcliff.
      \newblock Position Based Dynamics.
      \newblock --- Proceedings of Virtual Reality Interactions and Physical Simulations (VRIPhys),
                    Madrid, Spain, 2006.
      \newblock --- с.~71--80.

    \bibitem{visser-mapping}
      Hans de Visser, Olivier Comas, David Conlan, Sébastien Ourselin, Josh Passenger, Olivier Salvado.
      \newblock Deforming a High-Resolution Mesh in Real-Time by Mapping onto a Low-Resolution Physical Model.
      \newblock --- Lecture Notes in Computer Science, Vol. 5104/2008, Springer Science+Business Media,
                    USA, 2008.
      \newblock --- с.~135--146.

    \bibitem{huang-control-mesh}
      Jin Huang, Lu Chen, Xinguo Liu, Hujun Bao.
      \newblock Efficient Mesh Deformation Using Tetrahedron Control Mesh.
      \newblock --- Proceedings of the 2008 ACM symposium on Solid and Physical Modeling, New York,
                    USA, 2008.
      \newblock --- с.~241--247.

    \bibitem{fortran-jacobi}
      William Press, Brian Flannery, Saul Teukolsky.
      \newblock Numerical Recipes in FORTRAN 77, Vol. 1.
      \newblock --- Cambridge University Press, 1992.
      \newblock --- с.~456--462.

    \bibitem{hp-polar}
      Augustin A. Dubrulle.
      \newblock Frobenius Iteration for the Matrix Polar Decomposition
      \newblock --- HP Labs Technical Reports, 1994

    \bibitem{gems-middleware}
      Jason Hughes.
      \newblock What to Look for When Evaluating Middleware for Integration.
      \newblock --- Game Engine Gems Vol. 1, Jones and Barlett Publishers, USA, 2010.
      \newblock --- с.~3--10.

    \bibitem{chang-crash}
      Jian Chang, Jian J. Zhang, Rehan Zia
      \newblock Modelling deformations in car crash animation
      \newblock --- The Visual Computer Vol. 25, No. 12, Springer Science+Business Media, 2009
      \newblock --- с.~1063--1072

  \end{thebibliography}
\end{document}

